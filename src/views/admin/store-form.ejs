<%- include('partials/header', { title, session, active: 'stores' }) %>

<div class="admin-header">
  <h1><i class="fas fa-<%= store ? 'edit' : 'plus' %>"></i> <%= store ? 'Edit' : 'Add' %> Store</h1>
  <a href="/admin/stores?session=<%= session %>" class="btn btn-secondary">
    <i class="fas fa-arrow-left"></i> Back to Stores
  </a>
</div>

<div class="admin-card">
  <div class="admin-card-body">
    <form action="/admin/stores<%= store ? '/' + store.id : '' %>?session=<%= session %>" method="POST" class="admin-form">
      
      <div class="form-row">
        <div class="form-group">
          <label class="form-label" for="name">Store Name *</label>
          <input type="text" id="name" name="name" class="form-control" 
                 value="<%= store ? store.name : '' %>" required placeholder="e.g., Dominion - Stavanger Drive">
        </div>
        
        <div class="form-group">
          <label class="form-label" for="chain">Chain *</label>
          <input type="text" id="chain" name="chain" class="form-control" 
                 value="<%= store ? store.chain : '' %>" required placeholder="e.g., Dominion">
        </div>
      </div>
      
      <div class="form-group">
        <label class="form-label" for="address">Address</label>
        <input type="text" id="address" name="address" class="form-control" 
               value="<%= store ? store.address : '' %>" placeholder="e.g., 42 Stavanger Dr">
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label class="form-label" for="city">City *</label>
          <input type="text" id="city" name="city" class="form-control" 
                 value="<%= store ? store.city : '' %>" required placeholder="e.g., St. John's">
        </div>
        
        <div class="form-group">
          <label class="form-label" for="region">Region *</label>
          <select id="region" name="region" class="form-control" required>
            <% regions.forEach(r => { %>
            <option value="<%= r %>" <%= store && store.region === r ? 'selected' : '' %>><%= r %></option>
            <% }) %>
          </select>
        </div>
        
        <div class="form-group">
          <label class="form-label" for="postal_code">Postal Code</label>
          <input type="text" id="postal_code" name="postal_code" class="form-control" 
                 value="<%= store ? store.postal_code : '' %>" placeholder="A1A 1A1">
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label class="form-label" for="phone">Phone</label>
          <input type="tel" id="phone" name="phone" class="form-control" 
                 value="<%= store ? store.phone : '' %>" placeholder="709-XXX-XXXX">
        </div>
        
        <div class="form-group">
          <label class="form-label" for="website">Website</label>
          <input type="url" id="website" name="website" class="form-control" 
                 value="<%= store ? store.website : '' %>" placeholder="https://...">
        </div>
      </div>
      
      <div class="form-row">
        <div class="form-group">
          <label class="form-label" for="loyalty_program">Loyalty Program</label>
          <input type="text" id="loyalty_program" name="loyalty_program" class="form-control" 
                 value="<%= store ? store.loyalty_program : '' %>" placeholder="e.g., PC Optimum, Scene+">
        </div>
        
        <div class="form-group">
          <label class="form-label" for="store_type">Store Type</label>
          <select id="store_type" name="store_type" class="form-control">
            <% storeTypes.forEach(type => { %>
            <option value="<%= type %>" <%= store && store.store_type === type ? 'selected' : '' %>><%= type %></option>
            <% }) %>
          </select>
        </div>
      </div>
      
      <div class="form-group">
        <button type="submit" class="btn btn-primary btn-lg">
          <i class="fas fa-save"></i> <%= store ? 'Update' : 'Create' %> Store
        </button>
        <a href="/admin/stores?session=<%= session %>" class="btn btn-secondary btn-lg">Cancel</a>
      </div>
    </form>
  </div>
</div>

<%- include('partials/footer') %>
